<div class="bg-white rounded mt-2 md:mt-0 p-8 shadow max-w-4xl mx-2 md:mx-auto">
  <p class="text-base my-2">
    <a routerLink="/sessions" class="text-blue-500">See all Sessions</a>
  </p>
  <!--  -->
  <div class="h-[1px] bg-gray-200 my-4 overflow-hidden"></div>
  <!--  -->
  <h3 class="text-lg font-extrabold mb-6 text-gray-500">
    Start a Session with <span class="text-gray-700">SAKSHI</span
    ><span class="text-green-500">.AI</span>
  </h3>
  <form [formGroup]="sessionForm" (ngSubmit)="submitSessionForm()">
    <mat-form-field>
      <mat-label>Duration</mat-label>
      <mat-select name="sessionDuration" formControlName="sessionDuration">
        @for (m of minutes; track m) {
        <mat-option [value]="m">{{ m }} Mins</mat-option>
        }
      </mat-select>
    </mat-form-field>
    <div class="">
      <h3 class="mb-2 flex items-center space-x-1">
        <span>Goals and Expectations</span>
        <span
          class="material-symbols-rounded size-6 text-base text-blue-500 cursor-pointer"
          matTooltip="Goals and Expectations"
          matTooltipPosition="right"
        >
          info
        </span>
      </h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-1 md:gap-2">
        <mat-form-field class="w-full">
          <mat-label>Treatment and Goals</mat-label>
          <input
            matInput
            name="treatmentGoals"
            formControlName="treatmentGoals"
          />
        </mat-form-field>

        <mat-form-field class="w-full">
          <mat-label>Client Expectations</mat-label>
          <input
            matInput
            name="clientExpectations"
            formControlName="clientExpectations"
          />
        </mat-form-field>
        <mat-form-field class="w-full">
          <mat-label>Name</mat-label>
          <input
            matInput
            name="name"
            formControlName="name"
          />
        </mat-form-field>
      </div>
    </div>
    <div class="">
      <h3 class="mb-2">Termination</h3>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-1 lg:gap-2">
        <mat-form-field class="w-full">
          <mat-label>Termination Plan</mat-label>
          <input
            matInput
            name="terminationPlan"
            formControlName="terminationPlan"
          />
        </mat-form-field>

        <mat-form-field class="w-full">
          <mat-label>Review of Progress</mat-label>
          <input
            matInput
            name="reviewOfProgress"
            formControlName="reviewOfProgress"
          />
        </mat-form-field>

        <mat-form-field class="w-full">
          <mat-label>Thank You NOTE</mat-label>
          <input matInput name="thankYouNote" formControlName="thankYouNote" />
        </mat-form-field>
      </div>
    </div>
    <div class="">
      <h3 class="mb-2 flex items-center space-x-1">
        <span>Session Notes</span>
        <span
          class="material-symbols-rounded size-6 text-base text-blue-500 cursor-pointer"
          matTooltip="Session Notes"
          matTooltipPosition="above"
        >
          info
        </span>
      </h3>

      <mat-form-field class="w-full">
        <mat-label>Session Notes</mat-label>
        <textarea
          matInput
          name="sessionNotes"
          disabled
          [value]="sessionForm.controls['sessionNotes'].value"
          style="resize: none"
        ></textarea>
      </mat-form-field>
    </div>
    <div class="space-x-2">
      <button type="button" (click)="resetSessionForm()" mat-flat-button>
        <span>Cancel</span>
      </button>
      @if (isLoading) {
      <button type="button" mat-flat-button>
        <mat-icon class="animate-spin">progress_activity</mat-icon>
        <span class="animate-pulse">Creating Session ...</span>
      </button>
      }@else {
      <button
        type="submit"
        mat-raised-button
        color="accent"
        [disabled]="sessionForm.invalid"
      >
        <span> Create Session </span>
      </button>
      }
    </div>
  </form>
</div>

<app-modal
  actionText="Got It"
  (onAction)="closeModal()"
  (onCancel)="closeModal()"
  [isOpen]="modalState"
>
  <p>Please fill all the necessary details to proceed</p>
</app-modal>
